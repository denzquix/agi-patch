<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patching Tool</title>
    <script src="agi-patch.js"></script>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="icon.png">    
  </head>
  <body>
    <div class="container" data-tab-context>
      <div class="header">
        <h1>Structured Adventure Patch Package (SAPP) Tool</h1>
      </div>
      
      <!-- Main Tabs -->
      <div class="tabs">
        <div class="tab active" data-tab="apply-patch">Apply Patch</div>
        <div class="tab" data-tab="create-patch">Create Patch</div>
      </div>
      
      <!-- Apply Patch Tab Content -->
      <div class="tab-content active" data-tab-content="apply-patch">
        <div class="section patch-section">
          <div class="section-header">1. Select .SAPP File</div>
          <div class="section-content">
            <div class="patch-selection" data-tab-context>
              <div class="inner-tabs">
                <div class="inner-tab active" data-tab="known-patches">Known Patches</div>
                <div class="inner-tab" data-tab="upload-patch">Custom Patch</div>
              </div>
              
              <div class="inner-tab-content active" data-tab-content="known-patches">
                <ul class="select-list">
                  <li data-url="KingsQuest1_RubberTreeEdition_v1.0_20250428.sapp">KingsQuest1_RubberTreeEdition_v1.0_20250428.sapp</li>
                </ul>
              </div>
              
              <div class="inner-tab-content" data-tab-content="upload-patch">
                <div class="dropzone" data-file-is="patch-file">
                  <div class="icon">游닌</div>
                  <p>Drag and drop a .SAPP file here<br>or <a href="#" data-action="choose-file">click here to select one from your file system</a></p>
                  <input type="file" style="display: none" accept=".sapp">
                </div>
              </div>
            </div>
            <div class="selected-patch">
              <p>Selected patch: <span class="patch-filename"></span> <button data-action="cancel-selected-patch">X</button></p>
            </div>
          </div>
        </div>
        
        <div class="section">
          <div class="section-header">2. Select Files to Patch</div>
          <div class="section-content">
            <div class="dropzone" data-target-volume="files-to-patch">
              <div class="icon">游닌</div>
              <p>Drag and drop files or folders here<br>or <a href="#" data-action="choose-files">select file(s)</a> or <a href="#" data-action="choose-folder">select a folder</a></p>
              <input type="file" style="display: none" multiple>
              <input type="file" style="display: none" webkitdirectory>
            </div>
            
          <div id="target-files-tree" class="tree-view" data-volume="files-to-patch">
            <!-- Tree will be populated via JavaScript -->
          </div>
        </div>
      </div>
        
      <button class="file-browser-btn" style="margin: 0 20px 20px auto; display: block;">Apply Patch</button>
    </div>
    
    <!-- Create Patch Tab Content -->
    <div data-tab-content="create-patch" class="tab-content">
      <div class="section">
        <div class="section-header">Compare Files</div>
        <div class="section-content">
          <div class="side-by-side">
            <div>
              <h3>Original Files</h3>
              <div class="dropzone" data-target-volume="original-files">
                <div class="icon">游닌</div>
                <p>Drag and drop files or folders here<br>or <a href="#" data-action="choose-files">select file(s)</a> or <a href="#" data-action="choose-folder">select a folder</a></p>
                <input type="file" style="display: none" multiple>
                <input type="file" style="display: none" webkitdirectory>
              </div>
              
              <div class="tree-view" data-volume="original-files">
                <!-- Tree will be populated via JavaScript -->
              </div>
            </div>
            
            <div>
              <h3>Modified Files</h3>
              <div class="dropzone" data-target-volume="modified-files">
                <div class="icon">游닌</div>
                <p>Drag and drop files or folders here<br>or <a href="#" data-action="choose-files">select file(s)</a> or <a href="#" data-action="choose-folder">select a folder</a></p>
                <input type="file" style="display: none" multiple>
                <input type="file" style="display: none" webkitdirectory>
              </div>
              
              <div class="tree-view" data-volume="modified-files">
                <!-- Tree will be populated via JavaScript -->
              </div>
            </div>
          </div>
        </div>
        </div>
        
        <button data-action="create-patch" class="file-browser-btn" style="margin: 0 20px 20px auto; display: block;">Create Patch</button>
      </div>
    </div>
    <dialog class="message-box">
      <div class="header">
        <h1>Alert</h1>
      </div>
      <form method="dialog">
        <p>Something has happened.</p>
        <div class="buttons">
          <button>OK</button>
        </div>
      </form>
    </dialog>
  </body>
</html>
